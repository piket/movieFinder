<% include partials/header %>

<% if (typeof error === 'boolean') { %>
<h4 class="text-center">Connection error, please try again: <a href="/movies/<%=imdbId%>">Reload</a>
    <% } else { %>
    <div class="row">
    <div class="col-sm-4">
                        <% if (faved) { %>
                        <h4 class="favorited pull-right">This movie is already added to your favorites</h4>
                        <%}else { %>
                        <form action="/favorites/save" method="post">
                            <input type="submit" value="Favorite" class="btn btn-warning pull-right">
                            <input type="hidden" name="id" value="<%=data.imdbID%>">
                            <input type="hidden" name="title" value="<%=data.Title%>">
                            <input type="hidden" name="year" value="<%=data.Year%>">
                            <input type="hidden" name="poster" value="<%=data.Poster%>">
                        </form>
                        <%}%>
                        </div>
                        <div class="col-sm-4">
    <h2 class="text-center title"><%= data.Title %></h2>
    </div>
    </div>
    <div class="row">
    <hr>
    </div>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
            <div class="row">
                <div class="row">
                    <div class="col-sm-4">
                        <% if(data.Poster === 'N/A') { %>
                        <h4>No image avaliable</h4>
                        <% } else { %>
                        <img src=<%= data.Poster %> class="poster center-block">
                        <% } %>
                        <% if (data.Metascore !== 'N/A' && data.imdbRating !== 'N/A' && data.tomatoMeter !== 'N/A') { %>
                        <h5>Ratings:</h5>
                        <% if (data.Metascore !== 'N/A') { %>
                        <h6>Metascore: <%= data.Metascore %>/100</h6>
                        <% } %>
                        <% if (data.imdbRating !== 'N/A') { %>
                        <h6>IMDB Rating: <%= data.imdbRating %>/10<br>
                            <% for (var x = 1; x <= 10; x++) { %>
                            <% if (x <= Math.round(data.imdbRating)) { %>
                            <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                            <% } else { %>
                            <span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                            <% } %>
                            <% } %>
                        </h6>
                        <% } %>
                        <% if (data.tomatoMeter !== 'N/A') { %>
                        <h6>Tomato Meter: <span class=<%= data.tomatoImage%>><%= data.tomatoMeter %>%</span></h6>
                        <% } %>
                        <% } %>
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <h4 class="col-sm-6"><span class="highlight">Released:</span> <%= data.Released %></h4><h4 class="col-sm-6"><span class="highlight">Rated:</span> <%= data.Rated %></h4>
                        </div>
                        <div class="row">
                            <h4 class="col-sm-12"><span class="highlight">Director:</span> <%= data.Director %></h4>
                        </div>
                        <div class="row">
                            <h4 class="col-sm-12"><span class="highlight">Writer:</span> <%= data.Writer %></h4>
                        </div>
                        <div class="row">
                            <hr>
                            <p class="col-sm-12"><span class="highlight">Plot Synopsis:</span> <%= data.Plot %></p>
                            <p class="col-sm-12"><span class="highlight">Actors:</span> <%= data.Actors %></p>
                            <p class="col-sm-6"><span class="highlight">Genre:</span> <%= data.Genre %></p><p class="col-sm-6"><span class="highlight">Runtime:</span> <%= data.Runtime %></p>
                            <p class="col-sm-12"><span class="highlight">Critic Consensus:</span> <%= data.tomatoConsensus %></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% } %>

        <% include partials/footer %>